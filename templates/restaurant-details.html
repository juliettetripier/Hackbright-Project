{% extends 'base.html' %}
{% block title %}{{ data['name'] }}{% endblock %}

{% block body %}

<h1>{{ data['name'] }}</h1>

<h3>
    {% for item in data['location']['display_address'] %}
    {{ item }}
    {% endfor %}
</h3>

<div id="visit-div">
{% if visit %}
    <button type="button" id="visit-button" name="visit-button" value="{{ data['id'] }}" style="display: none">I ate here!</button>
    <button type="button" id="unvisit-button" name="unvisit-button" value="{{ data['id'] }}">Click here to unvisit</button>
{% else %}
    <button type="button" id="visit-button" name="visit-button" value="{{ data['id'] }}">I ate here!</button>
    <button type="button" id="unvisit-button" name="unvisit-button" value="{{ data['id'] }}" style="display: none">Click here to unvisit</button>
{% endif %}
</div>

<div id="list-div">
    <h3>Add to List</h3>
    {% if user.lists %}
        <select name="list-dropdown" id="which-list">
            {% for list in user.lists %}
                <option value="{{ list.list_id }}">{{ list.name }}</option>
            {% endfor %}
        </select>
        <button type="button" id="add-to-list-button">Add</button>
    {% else %}
        <p>You have no lists!</p>
        <p><a href="/newlist">Click here</a> to make a list.</p>
        <input type="hidden" id="add-to-list-button">
    {% endif %}
</div>

<div id="tags-div">
    <h3>Add a Tag</h3>
    <select name="tags-dropdown" id="which-tag">
        {% for tag in tags %}
            <option value="{{ tag.tag_id }}">{{ tag.name }}</option>
        {% endfor %}
    </select>
    <button type="button" id="add-tag-button">Add Tag</button>
    {% if user_tags %}
        <div id="edit-tags">
            <form action="/deletetag" method="POST">
                <h5>Edit Your Tags</h5>
                {% for tag in user_tags %}
                    <input type="checkbox" id="{{ tag.tag_id }}" name="tag_id" value="{{ tag.tag_id }}">
                    <label for="{{ tag.tag_id }}">{{ tag.tag.name }}</label>
                    <br>
                {% endfor %}
                <input type="hidden" name="restaurant_yelp_id" value="{{ data['id'] }}">
                <button type="submit">Delete Selected Tags</button>
            </form>
        </div>
    {% endif %}
</div>

<div id="yelp-image">
    <img src="{{ data['image_url'] }}">
</div>

<h4>Price: {{ data['price'] }}</h4>

<div id="transactions">
    {% for item in data['transactions'] %}
    <p>{{ item }}</p>
    {% endfor %}
</div>

<div id="hours">
    <h4>Hours</h4>
    <p>Sunday: {{ data['hours'][0]['open'][6]['start'] }} - 
        {{ data['hours'][0]['open'][6]['end'] }}
    </p>
    <p>Monday: {{ data['hours'][0]['open'][0]['start'] }} - 
        {{ data['hours'][0]['open'][0]['end'] }}
    </p>
    <p>Tuesday: {{ data['hours'][0]['open'][1]['start'] }} - 
        {{ data['hours'][0]['open'][1]['end'] }}
    </p>
    <p>Wednesday: {{ data['hours'][0]['open'][2]['start'] }} - 
        {{ data['hours'][0]['open'][2]['start'] }}
    </p>
    <p>Thursday: {{ data['hours'][0]['open'][3]['start'] }} - 
        {{ data['hours'][0]['open'][3]['end'] }}
    </p>
    <p>Friday: {{ data['hours'][0]['open'][4]['start'] }} - 
        {{ data['hours'][0]['open'][4]['end'] }}
    </p>
    <p>Saturday: {{ data['hours'][0]['open'][5]['start'] }} - 
        {{ data['hours'][0]['open'][5]['end'] }}
    </p>
</div>

<h4>Contact: {{ data['display_phone'] }}</h4>

<script src="/static/js/restaurant.js"></script>

{% endblock %}
